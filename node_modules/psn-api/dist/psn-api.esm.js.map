{"version":3,"file":"psn-api.esm.js","sources":["../src/authenticate/AUTH_BASE_URL.ts","../src/authenticate/exchangeCodeForAccessToken.ts","../src/authenticate/exchangeNpssoForCode.ts","../src/authenticate/exchangeRefreshTokenForAuthTokens.ts","../src/utils/call.ts","../src/graphql/GRAPHQL_BASE_URL.ts","../src/graphql/operationHashes.ts","../src/graphql/getRecentlyPlayedGames.ts","../src/models/trophy-rarity.model.ts","../src/utils/buildRequestUrl.ts","../src/search/SEARCH_BASE_URL.ts","../src/search/makeUniversalSearch.ts","../src/trophy/TROPHY_BASE_URL.ts","../src/trophy/title/getTitleTrophies.ts","../src/trophy/title/getTitleTrophyGroups.ts","../src/trophy/user/getUserTitles.ts","../src/trophy/user/getUserTrophiesEarnedForTitle.ts","../src/trophy/user/getUserTrophyGroupEarningsForTitle.ts","../src/trophy/user/getUserTrophyProfileSummary.ts","../src/user/USER_BASE_URL.ts","../src/user/getProfileFromAccountId.ts","../src/user/getProfileFromUserName.ts","../src/user/getUserFriendsAccountIds.ts"],"sourcesContent":["export const AUTH_BASE_URL = \"https://ca.account.sony.com/api/authz/v3/oauth\";\n","import fetch from \"isomorphic-unfetch\";\n\nimport type { AuthTokensResponse } from \"../models\";\nimport { AUTH_BASE_URL } from \"./AUTH_BASE_URL\";\n\n/**\n * @param accessCode Your access code, typically retrieved by using `exchangeNpssoForCode()`.\n * @returns An object containing an access token, refresh token, and expiry times for both.\n */\nexport const exchangeCodeForAccessToken = async (\n  accessCode: string\n): Promise<AuthTokensResponse> => {\n  const requestUrl = `${AUTH_BASE_URL}/token`;\n\n  const res = await fetch(requestUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization:\n        \"Basic MDk1MTUxNTktNzIzNy00MzcwLTliNDAtMzgwNmU2N2MwODkxOnVjUGprYTV0bnRCMktxc1A=\"\n    },\n    body: new URLSearchParams({\n      code: accessCode,\n      redirect_uri: \"com.scee.psxandroid.scecompcall://redirect\",\n      grant_type: \"authorization_code\",\n      token_format: \"jwt\"\n    }).toString()\n  });\n\n  const raw = await res.json();\n\n  return {\n    accessToken: raw.access_token,\n    expiresIn: raw.expires_in,\n    idToken: raw.id_token,\n    refreshToken: raw.refresh_token,\n    refreshTokenExpiresIn: raw.refresh_token_expires_in,\n    scope: raw.scope,\n    tokenType: raw.token_type\n  };\n};\n","import fetch from \"isomorphic-unfetch\";\n\nimport { AUTH_BASE_URL } from \"./AUTH_BASE_URL\";\n\n/**\n *\n * @param npssoToken Your NPSSO token, retrieved from https://ca.account.sony.com/api/v1/ssocookie\n * @returns An access code, which can be exchanged for an access token using `exchangeCodeForAccessToken`.\n * @example\n * ```ts\n * const code = await exchangeNpssoForCode(\"myNpssoToken\");\n *\n * console.log(code) // --> \"v3.XXXXXX\"\n * ```\n */\nexport const exchangeNpssoForCode = async (\n  npssoToken: string\n): Promise<string> => {\n  const queryString = new URLSearchParams({\n    access_type: \"offline\",\n    client_id: \"09515159-7237-4370-9b40-3806e67c0891\",\n    redirect_uri: \"com.scee.psxandroid.scecompcall://redirect\",\n    response_type: \"code\",\n    scope: \"psn:mobile.v2.core psn:clientapp\"\n  }).toString();\n\n  const requestUrl = `${AUTH_BASE_URL}/authorize?${queryString}`;\n\n  // This never returns a 200. As of Oct 10 2021, it seems to return a 302.\n  const { headers: responseHeaders } = await fetch(requestUrl, {\n    headers: {\n      Cookie: `npsso=${npssoToken}`\n    },\n    redirect: \"manual\"\n  });\n\n  // The access code itself is stored in a header on the response.\n  // We'll perform a few validations to ensure it's actually there.\n  if (\n    !responseHeaders.has(\"location\") ||\n    !responseHeaders.get(\"location\")?.includes(\"?code=\")\n  ) {\n    throw new Error(`\n      There was a problem retrieving your PSN access code. Is your NPSSO code valid?\n      To get a new NPSSO code, visit https://ca.account.sony.com/api/v1/ssocookie.\n    `);\n  }\n\n  const redirectLocation = responseHeaders.get(\"location\") as string;\n  const redirectParams = new URLSearchParams(\n    redirectLocation.split(\"redirect/\")[1]\n  );\n\n  return redirectParams.get(\"code\") as string;\n};\n","import fetch from \"isomorphic-unfetch\";\n\nimport type { AuthTokensResponse } from \"../models\";\nimport { AUTH_BASE_URL } from \"./AUTH_BASE_URL\";\n\nexport const exchangeRefreshTokenForAuthTokens = async (\n  refreshToken: string\n): Promise<AuthTokensResponse> => {\n  const requestUrl = `${AUTH_BASE_URL}/token`;\n\n  const res = await fetch(requestUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\",\n      Authorization:\n        \"Basic MDk1MTUxNTktNzIzNy00MzcwLTliNDAtMzgwNmU2N2MwODkxOnVjUGprYTV0bnRCMktxc1A=\"\n    },\n    body: new URLSearchParams({\n      refresh_token: refreshToken,\n      grant_type: \"refresh_token\",\n      token_format: \"jwt\",\n      scope: \"psn:mobile.v2.core psn:clientapp\"\n    }).toString()\n  });\n\n  const raw = await res.json();\n\n  return {\n    accessToken: raw.access_token,\n    expiresIn: raw.expires_in,\n    idToken: raw.id_token,\n    refreshToken: raw.refresh_token,\n    refreshTokenExpiresIn: raw.refresh_token_expires_in,\n    scope: raw.scope,\n    tokenType: raw.token_type\n  };\n};\n","import fetch from \"isomorphic-unfetch\";\n\nimport type { AuthorizationPayload, CallValidHeaders } from \"../models\";\n\nexport const call = async <T>(\n  config: {\n    url: string;\n    method?: \"GET\" | \"POST\";\n    headers?: CallValidHeaders;\n  },\n  authorization: AuthorizationPayload,\n  bodyPayload?: Record<string, any>\n) => {\n  const response = await fetch(config.url, {\n    method: config?.method ?? \"GET\",\n    headers: {\n      Authorization: `Bearer ${authorization.accessToken}`,\n      \"Content-Type\": \"application/json\",\n      ...config?.headers\n    },\n    body: JSON.stringify(bodyPayload)\n  });\n\n  return (await response.json()) as T;\n};\n","export const GRAPHQL_BASE_URL =\n  \"https://web.np.playstation.com/api/graphql/v1/op\";\n","/**\n * GraphQL endpoints work differently to others in the codebase.\n *\n * The hashes in this file are reverse engineered from app-<hash>.js file loaded by the page\n * at https://library.playstation.com/recently-played. Following the code in that file leads\n * to some Apollo GraphQL code related to persisted queries. This means the request needs to\n * contain a SHA256 hash of the GraphQL query being executed. Searching for PersistedQueryLink\n * and createPersistedQueryLink_hashes, and an AST function in Sony's JS source and debugging\n * will surface the exact GraphQL query that's passed to the hash function on the page.\n *\n * Thankfully it's easier to figure out future endpoints and hashes by:\n *\n * 1. Visiting a page, e.g https://library.playstation.com/recently-played\n * 2. Using DevTools to find requests to https://web.np.playstation.com/api/graphql/v1/op\n * 3. Decoding the URL parameters to find the correct SHA256 hash and some of the supported parameters\n */\n\n// Hash is computed from the following query (without surrounding quotes):\n// \"query getUserGameList($categories: String, $limit: Int, $orderBy: String, $subscriptionService: SubscriptionService) {\\n  gameLibraryTitlesRetrieve(categories: $categories, limit: $limit, orderBy: $orderBy, subscriptionService: $subscriptionService) {\\n    __typename\\n    games {\\n      __typename\\n      conceptId\\n      entitlementId\\n      image {\\n        __typename\\n        url\\n      }\\n      isActive\\n      lastPlayedDateTime\\n      name\\n      platform\\n      productId\\n      subscriptionService\\n      titleId\\n    }\\n  }\\n}\\n\"\nexport const getUserGameListHash =\n  \"e780a6d8b921ef0c59ec01ea5c5255671272ca0d819edb61320914cf7a78b3ae\";\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  RecentlyPlayedGamesResponse\n} from \"../models\";\nimport { call } from \"../utils/call\";\nimport { GRAPHQL_BASE_URL } from \"./GRAPHQL_BASE_URL\";\nimport { getUserGameListHash } from \"./operationHashes\";\n\ntype GetRecentlyPlayedGamesOptionsCategories = \"ps4_game\" | \"ps5_native_game\";\ntype GetRecentlyPlayedGamesOptions = Pick<AllCallOptions, \"limit\"> & {\n  categories: GetRecentlyPlayedGamesOptionsCategories[];\n};\n\n/**\n * A call to this function will retrieve recently played games for the user associated\n * with the npsso token provided to this module during initialisation.\n *\n * This is useful if you want recent activity that isn't tied to trophy progress.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n */\nexport const getRecentlyPlayedGames = async (\n  authorization: AuthorizationPayload,\n  options: Partial<GetRecentlyPlayedGamesOptions> = {}\n): Promise<RecentlyPlayedGamesResponse> => {\n  const { limit = 50, categories = [\"ps4_game\", \"ps5_native_game\"] } = options;\n\n  const url = new URL(GRAPHQL_BASE_URL);\n\n  url.searchParams.set(\"operationName\", \"getUserGameList\");\n  url.searchParams.set(\n    \"variables\",\n    JSON.stringify({\n      limit,\n      categories: categories.join(\",\")\n    })\n  );\n  url.searchParams.set(\n    \"extensions\",\n    JSON.stringify({\n      persistedQuery: {\n        version: 1,\n        sha256Hash: getUserGameListHash\n      }\n    })\n  );\n\n  const response = await call<RecentlyPlayedGamesResponse>(\n    { url: url.toString() },\n    authorization\n  );\n\n  // The GraphQL queries can return non-truthy values.\n  if (!response.data || !response.data.gameLibraryTitlesRetrieve) {\n    throw new Error(JSON.stringify(response));\n  }\n\n  return response;\n};\n","export enum TrophyRarity {\n  UltraRare,\n  VeryRare,\n  Rare,\n  Common\n}\n","import type { AllCallOptions } from \"../models\";\n\nexport const buildRequestUrl = (\n  baseUrl: string,\n  endpointUrl: string,\n  options: Partial<AllCallOptions> = {},\n  args: Record<string, string | number> = {}\n) => {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars -- This is an intentional pick.\n  const { headerOverrides, ...pickedOptions } = options;\n\n  const concatenated = `${baseUrl}/${endpointUrl}`;\n  const withoutDoubleSlashes = concatenated.replace(/([^:]\\/)\\/+/g, \"$1\");\n\n  let withArgs = withoutDoubleSlashes;\n  const queryParamValues: Record<string, string> = {};\n\n  for (const [argKey, argValue] of Object.entries({\n    ...args,\n    ...pickedOptions\n  })) {\n    if (withArgs.includes(`:${argKey}`)) {\n      withArgs = withArgs.replace(`:${argKey}`, String(argValue));\n    } else if (argValue !== undefined) {\n      queryParamValues[argKey] = String(argValue);\n    }\n  }\n\n  const queryString = new URLSearchParams(queryParamValues).toString();\n  return queryString.length > 0 ? `${withArgs}?${queryString}` : withArgs;\n};\n","export const SEARCH_BASE_URL = \"https://m.np.playstation.com/api/search\";\n","import type {\n  AuthorizationPayload,\n  SocialAccountResult,\n  UniversalSearchDomains,\n  UniversalSearchResponse\n} from \"../models\";\nimport { buildRequestUrl } from \"../utils/buildRequestUrl\";\nimport { call } from \"../utils/call\";\nimport { SEARCH_BASE_URL } from \"./SEARCH_BASE_URL\";\n\nexport const makeUniversalSearch = async <R extends UniversalSearchDomains>(\n  authorization: AuthorizationPayload,\n  searchTerm: string,\n  domain: R\n) => {\n  const url = buildRequestUrl(SEARCH_BASE_URL, \"/v1/universalSearch\");\n\n  type AssertType<R> = R extends \"SocialAllAccounts\"\n    ? SocialAccountResult\n    : unknown;\n\n  return await call<UniversalSearchResponse<AssertType<typeof domain>>>(\n    { url, method: \"POST\" },\n    authorization,\n    {\n      searchTerm,\n      domainRequests: [\n        {\n          domain\n        }\n      ]\n    }\n  );\n};\n","export const TROPHY_BASE_URL = \"https://m.np.playstation.com/api/trophy\";\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  TitleTrophiesResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ntype GetTitleTrophiesOptions = Pick<\n  AllCallOptions,\n  \"headerOverrides\" | \"limit\" | \"npServiceName\" | \"offset\"\n>;\n\n/**\n * A call to this function will retrieve the trophy list of a\n * single - or all - trophy groups for a title. A title can have multiple\n * groups of trophies (a `\"default\"` group which all titles have, and additional\n * groups starting with the name `\"001\"` and incrementing for each additional group). To retrieve\n * trophies from all groups within a title (ie. the full trophy set), then\n * `trophyGroupId` should be set to `\"all\"`.\n *\n * When the title platform is PS3, PS4 or PS Vita you __must__ specify the\n * `npServiceName` parameter as `\"trophy\"`.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param npCommunicationId Unique ID of the title.\n * @param trophyGroupId `\"all\"` to return all trophies for the title, otherwise restrict results to a specific trophy group (such as a DLC).\n * @param options.npServiceName `\"trophy\"` for PS3, PS4, or PS Vita platforms. `\"trophy2\"` for the PS5 platform.\n * @param options.limit Limit the number of trophies returned.\n * @param options.offset Return trophy data from this result onwards.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getTitleTrophies = async (\n  authorization: AuthorizationPayload,\n  npCommunicationId: string,\n  trophyGroupId: string,\n  options?: Partial<GetTitleTrophiesOptions>\n): Promise<TitleTrophiesResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/npCommunicationIds/:npCommunicationId/trophyGroups/:trophyGroupId/trophies\",\n    options,\n    { npCommunicationId, trophyGroupId }\n  );\n\n  return await call<TitleTrophiesResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n};\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  TitleTrophyGroupsResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ntype GetTitleTrophyGroupsOptions = Pick<\n  AllCallOptions,\n  \"npServiceName\" | \"headerOverrides\"\n>;\n\n/**\n * A title may have multiple groups of trophies. This is most commonly\n * seen in games which have DLC expansions where additional trophies are added.\n *\n * You can call this function for a specific title - using the\n * unique `npCommunicationId` for the title - and you will receive a\n * summary of all of the trophy groups associated with the title.\n * This also includes a summary of the number of trophies for the\n * title, broken down by group and grade (gold, silver, etc.).\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param npCommunicationId The unique ID of the game title you wish to retrieve the trophy groups list for.\n * @param options.npServiceName `\"trophy\"` for PS3, PS4, or PS Vita platforms. `\"trophy2\"` for the PS5 platform.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getTitleTrophyGroups = async (\n  authorization: AuthorizationPayload,\n  npCommunicationId: string,\n  options?: Partial<GetTitleTrophyGroupsOptions>\n): Promise<TitleTrophyGroupsResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/npCommunicationIds/:npCommunicationId/trophyGroups\",\n    options,\n    { npCommunicationId }\n  );\n\n  return await call<TitleTrophyGroupsResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n};\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  UserTitlesResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ntype GetUserTitlesOptions = Pick<\n  AllCallOptions,\n  \"headerOverrides\" | \"limit\" | \"offset\"\n>;\n\n/**\n * A call to this function will retrieve a summarized list of titles played\n * by a user, ordered by recent trophy unlocks. The maximum amount that can\n * be returned by a single call is 800 (assuming a `limit` option of 800 is set).\n * If the user has more titles than the given `limit` option, subsequent calls\n * of this funciton must be made to fetch the complete list by paging via the\n * `offset` option.\n *\n * The numeric `accountId` can be that of any PSN account for which the authenticating\n * account has permissions to view the trophy list. When querying the titles\n * associated with the authenticating account, the numeric `accountId` can be\n * substituted with `\"me\"`.\n *\n * To fetch more detailed account progress for a title, the `getUserTrophiesEarnedForTitle()`\n * function can be used.\n *\n * To find a user's `accountId`, the `makeUniversalSearch()` function can be used.\n *\n * Included in the information returned is the titles' unique `npCommunicationId`.\n * This is required to make use of subsequent functions for requesting more specific\n * detail about a title's trophies.\n *\n * The results are presented in order of the `lastUpdatedDateTime` for the title,\n * so the first result will be the title for which a trophy was most recently earned\n * (or synced for the first time in the case of a game with 0% progress).\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The account whose trophy list is being accessed. Use `\"me\"` for the authenticating account.\n * @param options.limit Limit the number of titles returned.\n * @param options.offset Return title data from this result onwards.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getUserTitles = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  options?: Partial<GetUserTitlesOptions>\n): Promise<UserTitlesResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/users/:accountId/trophyTitles\",\n    options,\n    { accountId }\n  );\n\n  return await call<UserTitlesResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n};\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  UserTrophiesEarnedForTitleResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ntype GetUserTrophiesEarnedForTitleOptions = Pick<\n  AllCallOptions,\n  \"offset\" | \"npServiceName\" | \"limit\" | \"headerOverrides\"\n>;\n\n/**\n * A call to this function will retrieve the earned status of trophies for a user\n * from either a single - or all - trophy groups in a title. A title can have\n * multiple groups of trophies (a `\"default\"` group which all titles have, and\n * additional groups starting with a name of `\"001\"` and incrementing for each\n * additional group). To retrieve trophies from all groups within a title\n * (ie. the full trophy set), then `trophyGroupId` should be set to `\"all\"`.\n *\n * The numeric `accountId` can be that of any PSN account for which the\n * authenticating account has permissions to view the trophy list.\n * When querying the titles associated with the authenticating account, the\n * numeric `accountId` can be substituted with `\"me\"`.\n *\n * To find a user's `accountId`, the `makeUniversalSearch()` function can be used.\n *\n * This function returns the earned status of the\n * trophy only and no additional descriptive metadata (ie. trophy name,\n * trophy description). Use `getTitleTrophies()` to obtain this information.\n *\n * When the title platform is PS3, PS4, or PS Vita, you __must__ specify the\n * `npServiceName` option as `\"trophy\"`.\n *\n * If you attempt to query a title which the user does not have associated\n * with their account (ie. the title has not been launched and allowed to\n * sync at least once) then a Resource Not Found error will be thrown.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The account whose trophy list is being accessed. Use `\"me\"` for the authenticating account.\n * @param npCommunicationId Unique ID of the title.\n * @param trophyGroupId `\"all\"` to return all trophies for the title, otherwise restrict results to a specific trophy group (such as a DLC).\n * @param options.npServiceName `\"trophy\"` for PS3, PS4, or PS Vita platforms. `\"trophy2\"` for the PS5 platform.\n * @param options.limit Limit the number of trophies returned.\n * @param options.offset Return trophy data from this result onwards.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getUserTrophiesEarnedForTitle = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  npCommunicationId: string,\n  trophyGroupId: string,\n  options?: Partial<GetUserTrophiesEarnedForTitleOptions>\n): Promise<UserTrophiesEarnedForTitleResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/users/:accountId/npCommunicationIds/:npCommunicationId/trophyGroups/:trophyGroupId/trophies\",\n    options,\n    { accountId, npCommunicationId, trophyGroupId }\n  );\n\n  const response = await call<UserTrophiesEarnedForTitleResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n\n  if ((response as any)?.error) {\n    throw new Error((response as any)?.error?.message ?? \"Unexpected Error\");\n  }\n\n  return response;\n};\n","import type {\n  AuthorizationPayload,\n  CallValidHeaders,\n  UserTrophyGroupEarningsForTitleResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ninterface GetUserTrophyGroupEarningsForTitleOptions {\n  /**\n   * Not required unless the platform is PS3, PS4, or PS Vita.\n   * If one of these platforms, the value __must__ be `\"trophy\"`.\n   *\n   * `\"trophy\"` for PS3, PS4, or PS Vita platforms.\n   * `\"trophy2\"` for the PS5 platform.\n   */\n  npServiceName: \"trophy\" | \"trophy2\";\n\n  /*\n   * Override the headers in the request to the PSN API,\n   * such as to change the language.\n   */\n  headerOverrides: CallValidHeaders;\n}\n\n/**\n * A request to this endpoint function will retrieve a summary of the trophies earned for\n * a user broken down by trophy group within a title. A title can have\n * multiple groups of trophies (a `\"default\"` group which all titles have,\n * and additional groups beginning with the name `\"001\"` and incrementing for\n * each additional group).\n *\n * The numeric `accountId` can be that of any PSN account for which the\n * authenticating account has permissions to view the trophy list.\n * When querying the titles associated with the authenticating account, the\n * numeric `accountId` can be substituted with `\"me\"`.\n *\n * To find a user's `accountId`, the `makeUniversalSearch()` function can be used.\n *\n * This function calls an endpoint that returns the earned status of the\n * trophy only and no additional descriptive metadata (ie. trophy name,\n * trophy description). Use `getTitleTrophies()` to obtain this information.\n *\n *  When the title platform is PS3, PS4 or PS Vita you __must__ specify the\n * `npServiceName` option as `\"trophy\"`.\n *\n * If you attempt to query a title which the user does not have associated\n * with their account (ie. the title has not been launched and allowed to\n * sync at least once) then a Resource Not Found error will be thrown.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The account whose trophy list is being accessed. Use `\"me\"` for the authenticating account.\n * @param npCommunicationId Unique ID of the title.\n * @param options.npServiceName `\"trophy\"` for PS3, PS4, or PS Vita platforms. `\"trophy2\"` for the PS5 platform.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getUserTrophyGroupEarningsForTitle = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  npCommunicationId: string,\n  options?: Partial<GetUserTrophyGroupEarningsForTitleOptions>\n): Promise<UserTrophyGroupEarningsForTitleResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/users/:accountId/npCommunicationIds/:npCommunicationId/trophyGroups\",\n    options,\n    { accountId, npCommunicationId }\n  );\n\n  const response = await call<UserTrophyGroupEarningsForTitleResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n\n  if ((response as any)?.error) {\n    throw new Error((response as any)?.error?.message ?? \"Unexpected Error\");\n  }\n\n  return response;\n};\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  UserTrophyProfileSummaryResponse\n} from \"../../models\";\nimport { buildRequestUrl } from \"../../utils/buildRequestUrl\";\nimport { call } from \"../../utils/call\";\nimport { TROPHY_BASE_URL } from \"../TROPHY_BASE_URL\";\n\ntype GetUserTrophyProfileSummaryOptions = Pick<\n  AllCallOptions,\n  \"headerOverrides\"\n>;\n\n/**\n * A call to this function will retrieve an overall summary of the number of\n * trophies earned for a user broken down by grade, as well as their current\n * overall trophy level, progress towards the next level, and which tier their\n * current level falls in to. The tiers are based on the [level changes introduced in 2020](https://andshrew.github.io/PlayStation-Trophies/images/psn-trophy-tiers.png).\n *\n * The numeric `accountId` can be that of any PSN account for which the\n * authenticating account has permissions to view the trophy list.\n * When querying the titles associated with the authenticating account, the\n * numeric `accountId` can be substituted with `\"me\"`.\n *\n * To find a user's `accountId`, the `makeUniversalSearch()` function can be used.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The account whose trophy list is being accessed. Use `\"me\"` for the authenticating account.\n * @param options.headerOverrides Override the headers in the request to the PSN API, such as to change the language.\n */\nexport const getUserTrophyProfileSummary = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  options?: Partial<GetUserTrophyProfileSummaryOptions>\n): Promise<UserTrophyProfileSummaryResponse> => {\n  const url = buildRequestUrl(\n    TROPHY_BASE_URL,\n    \"/v1/users/:accountId/trophySummary\",\n    options,\n    { accountId }\n  );\n\n  return await call<UserTrophyProfileSummaryResponse>(\n    { url, headers: options?.headerOverrides },\n    authorization\n  );\n};\n","export const USER_BASE_URL =\n  \"https://m.np.playstation.com/api/userProfile/v1/internal/users\";\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  ProfileFromAccountIdResponse\n} from \"../models\";\nimport { buildRequestUrl } from \"../utils/buildRequestUrl\";\nimport { call } from \"../utils/call\";\nimport { USER_BASE_URL } from \"./USER_BASE_URL\";\n\ntype GetProfileFromAccountIdOptions = Pick<AllCallOptions, \"headerOverrides\">;\n\n/**\n * A call to this function will retrieve some profile information of the accountId being requested.\n * If the account's profile cannot be found (either due to non-existence or privacy settings),\n * an error will be thrown.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The accountId for the user you wish to retrieve a profile for.\n */\nexport const getProfileFromAccountId = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  options?: GetProfileFromAccountIdOptions\n): Promise<ProfileFromAccountIdResponse> => {\n  const url = buildRequestUrl(USER_BASE_URL, \"/:accountId/profiles\", options, {\n    accountId\n  });\n  const response = await call<ProfileFromAccountIdResponse>(\n    { url },\n    authorization\n  );\n\n  if ((response as any)?.error) {\n    throw new Error((response as any)?.error?.message ?? \"Unexpected Error\");\n  }\n\n  return response;\n};\n","import type {\n  AuthorizationPayload,\n  ProfileFromUserNameResponse\n} from \"../models\";\nimport { call } from \"../utils/call\";\n\n/**\n * A call to this function will retrieve the profile of the username being requested.\n * If the user cannot be found (either due to non-existence or privacy settings),\n * an error will be thrown.\n *\n * This is a legacy API endpoint function. If you are just trying to get a user's\n * account ID, [`makeUniversalSearch()`](https://psn-api.achievements.app/api-docs/universal-search#makeuniversalsearch)\n * is recommended instead. This endpoint is here because it can return interesting\n * presence information when the user is playing on a legacy console such as a PS3.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param userName The username for the user you wish to retrieve a profile for.\n */\nexport const getProfileFromUserName = async (\n  authorization: AuthorizationPayload,\n  userName: string\n): Promise<ProfileFromUserNameResponse> => {\n  const url = `https://us-prof.np.community.playstation.net/userProfile/v1/users/${userName}/profile2?fields=npId,onlineId,accountId,avatarUrls,plus,aboutMe,languagesUsed,trophySummary(@default,level,progress,earnedTrophies),isOfficiallyVerified,personalDetail(@default,profilePictureUrls),personalDetailSharing,personalDetailSharingRequestMessageFlag,primaryOnlineStatus,presences(@default,@titleInfo,platform,lastOnlineDate,hasBroadcastData),requestMessageFlag,blocking,friendRelation,following,consoleAvailability`;\n\n  const response = await call<ProfileFromUserNameResponse>(\n    { url },\n    authorization\n  );\n\n  if ((response as any)?.error) {\n    throw new Error((response as any)?.error?.message ?? \"Unexpected Error\");\n  }\n\n  return response;\n};\n","import type {\n  AllCallOptions,\n  AuthorizationPayload,\n  GetUserFriendsAccountIdsResponse\n} from \"../models\";\nimport { buildRequestUrl } from \"../utils/buildRequestUrl\";\nimport { call } from \"../utils/call\";\nimport { USER_BASE_URL } from \"./USER_BASE_URL\";\n\ntype GetUserFriendsAccountIdsOptions = Pick<AllCallOptions, \"limit\" | \"offset\">;\n\n/**\n * A call to this function will retrieve the list of friended `accountId` values\n * associated with the given `accountId` parameter. If the user cannot be found\n * (either due to non-existence or privacy settings), an error will be thrown.\n *\n *  To find a user's `accountId`, the `makeUniversalSearch()` function can be used.\n *\n * @param authorization An object containing your access token, typically retrieved with `exchangeCodeForAccessToken()`.\n * @param accountId The account whose trophy list is being accessed. Use `\"me\"` for the authenticating account.\n */\nexport const getUserFriendsAccountIds = async (\n  authorization: AuthorizationPayload,\n  accountId: string,\n  options?: Partial<GetUserFriendsAccountIdsOptions>\n): Promise<GetUserFriendsAccountIdsResponse> => {\n  const url = buildRequestUrl(USER_BASE_URL, \"/:accountId/friends\", options, {\n    accountId\n  });\n\n  const response = await call<GetUserFriendsAccountIdsResponse>(\n    { url },\n    authorization\n  );\n\n  // If you are unable to access the user's friends list, a\n  // \"Not permitted by access control\" error will be thrown.\n  if ((response as any)?.error) {\n    throw new Error((response as any)?.error?.message ?? \"Unexpected Error\");\n  }\n\n  return response;\n};\n"],"names":["AUTH_BASE_URL","exchangeCodeForAccessToken","accessCode","requestUrl","fetch","method","headers","Authorization","body","URLSearchParams","code","redirect_uri","grant_type","token_format","toString","res","json","raw","accessToken","access_token","expiresIn","expires_in","idToken","id_token","refreshToken","refresh_token","refreshTokenExpiresIn","refresh_token_expires_in","scope","tokenType","token_type","exchangeNpssoForCode","npssoToken","queryString","access_type","client_id","response_type","Cookie","redirect","responseHeaders","has","get","includes","Error","redirectLocation","redirectParams","split","exchangeRefreshTokenForAuthTokens","call","config","authorization","bodyPayload","url","JSON","stringify","response","GRAPHQL_BASE_URL","getUserGameListHash","getRecentlyPlayedGames","options","limit","categories","URL","searchParams","set","join","persistedQuery","version","sha256Hash","data","gameLibraryTitlesRetrieve","TrophyRarity","buildRequestUrl","baseUrl","endpointUrl","args","headerOverrides","pickedOptions","concatenated","withoutDoubleSlashes","replace","withArgs","queryParamValues","Object","entries","argKey","argValue","String","undefined","length","SEARCH_BASE_URL","makeUniversalSearch","searchTerm","domain","domainRequests","TROPHY_BASE_URL","getTitleTrophies","npCommunicationId","trophyGroupId","getTitleTrophyGroups","getUserTitles","accountId","getUserTrophiesEarnedForTitle","error","message","getUserTrophyGroupEarningsForTitle","getUserTrophyProfileSummary","USER_BASE_URL","getProfileFromAccountId","getProfileFromUserName","userName","getUserFriendsAccountIds"],"mappings":"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"}